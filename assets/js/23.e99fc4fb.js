(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{510:function(a,s,t){"use strict";t.r(s);var e=t(20),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"docker常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker常用命令"}},[a._v("#")]),a._v(" Docker常用命令")]),a._v(" "),t("h2",{attrs:{id:"容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器"}},[a._v("#")]),a._v(" 容器")]),a._v(" "),t("h3",{attrs:{id:"查看容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器"}},[a._v("#")]),a._v(" 查看容器")]),a._v(" "),t("h4",{attrs:{id:"查看正在运行的容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看正在运行的容器"}},[a._v("#")]),a._v(" 查看正在运行的容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v("\n")])])]),t("h4",{attrs:{id:"查看所有的容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看所有的容器"}},[a._v("#")]),a._v(" 查看所有的容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" -a\n")])])]),t("h4",{attrs:{id:"查看指定状态的容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看指定状态的容器"}},[a._v("#")]),a._v(" 查看指定状态的容器")]),a._v(" "),t("p",[a._v("容器有如下几种状态，可以通过状态过滤")]),a._v(" "),t("p",[a._v("created, restarting, running, paused, exited")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker ps -a -f status=exited\n")])])]),t("ul",[t("li",[a._v("-f : 基于状态过滤")])]),a._v(" "),t("h4",{attrs:{id:"查看多种状态的容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看多种状态的容器"}},[a._v("#")]),a._v(" 查看多种状态的容器")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker ps -a -f status=exited -f status=created\n")])])]),t("h3",{attrs:{id:"删除容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除容器"}},[a._v("#")]),a._v(" 删除容器")]),a._v(" "),t("h4",{attrs:{id:"删除一个容器-多个容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除一个容器-多个容器"}},[a._v("#")]),a._v(" 删除一个容器/多个容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" ID_or_Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ID_or_Name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("h4",{attrs:{id:"删除容器id-or-name的格式-批量删除容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除容器id-or-name的格式-批量删除容器"}},[a._v("#")]),a._v(" 删除容器ID_or_Name的格式，批量删除容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" -a "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"pattern"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$3")]),a._v("}'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("xargs")]),a._v(" docker rmi\n")])])]),t("p",[a._v("使用 "),t("code",[a._v("awk")]),a._v(" 传递ID到 "),t("code",[a._v("docker rmi")])]),a._v(" "),t("h4",{attrs:{id:"删除所有特定状态的容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除所有特定状态的容器"}},[a._v("#")]),a._v(" 删除所有特定状态的容器")]),a._v(" "),t("h5",{attrs:{id:"列出所有退出的容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出所有退出的容器"}},[a._v("#")]),a._v(" 列出所有退出的容器")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker rm $(docker ps -a -f status=exited -q)\n")])])]),t("p",[a._v("-q: 传递容器ID 给 "),t("code",[a._v("docker rm")]),a._v("命令")]),a._v(" "),t("h5",{attrs:{id:"删除多种状态的容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除多种状态的容器"}},[a._v("#")]),a._v(" 删除多种状态的容器")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker rm $(docker ps -a -f status=exited -f status=created -q)\n")])])]),t("ul",[t("li",[a._v("退出容器时，移除容器")])]),a._v(" "),t("p",[a._v("运行"),t("code",[a._v("docker run --rm")]),a._v("，退出时自动删除容器。")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run --rm image_name\n")])])]),t("ul",[t("li",[a._v("移除所有的容器")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker stop $(docker ps -a -q)docker rm $(docker ps -a -q)\n")])])]),t("h3",{attrs:{id:"查看容器日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器日志"}},[a._v("#")]),a._v(" 查看容器日志")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker logs [containerID]\n")])])]),t("h3",{attrs:{id:"运行容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行容器"}},[a._v("#")]),a._v(" 运行容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" IMAGE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("COMMAND"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ARG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker run -it --name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("CONTAINER-NAME"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" -v "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("LocalPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ContainerPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("IMAGE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  /bin/bash\n")])])]),t("ul",[t("li",[a._v("-i: 交互式")]),a._v(" "),t("li",[a._v("-t: 终端terminal")]),a._v(" "),t("li",[a._v("-v: 将本地目录挂在到容器中")]),a._v(" "),t("li",[a._v("--name: 容器名称")]),a._v(" "),t("li",[a._v("/bin/bash: 指定终端类型")])]),a._v(" "),t("h3",{attrs:{id:"在运行的容器中执行命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在运行的容器中执行命令"}},[a._v("#")]),a._v(" 在运行的容器中执行命令")]),a._v(" "),t("p",[a._v("使用"),t("code",[a._v("docker exec")]),a._v("命令，可以在运行的容器中执行命令。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("Usage:  docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" CONTAINER COMMAND "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ARG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("Run a "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("command")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" a running containerOptions:  -d, --detach               Detached mode: run "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("command")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" the background      --detach-keys string   Override the key sequence "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" detaching a container  -e, --env list             Set environment variables      --env-file list        Read "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" a "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" of environment variables  -i, --interactive          Keep STDIN "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("open")]),a._v(" even "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" not attached      --privileged           Give extended privileges to the "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("command")]),a._v("  -t, --tty                  Allocate a pseudo-TTY  -u, --user string          Username or "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("UID")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("format: "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("uid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("group"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("gid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("  -w, --workdir string       Working directory inside the container\n")])])]),t("p",[a._v("示例:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -i 36edc560536b "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" -al /\n")])])]),t("p",[t("code",[a._v("ls -al /")]),a._v(" 为在容器中执行的命令")]),a._v(" "),t("h3",{attrs:{id:"导出容器到压缩文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导出容器到压缩文件"}},[a._v("#")]),a._v(" 导出容器到压缩文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("Usage:  docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" CONTAINERExport a container's filesystem as a "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" archiveOptions:  -o, --output string   Write to a file, instead of STDOUT\n")])])]),t("h3",{attrs:{id:"查看容器中运行的进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器中运行的进程"}},[a._v("#")]),a._v(" 查看容器中运行的进程")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("Usage:  docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("top")]),a._v(" CONTAINER "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ps OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("Display the running processes of a container\n")])])]),t("h2",{attrs:{id:"镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像"}},[a._v("#")]),a._v(" 镜像")]),a._v(" "),t("h3",{attrs:{id:"查看镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看镜像"}},[a._v("#")]),a._v(" 查看镜像")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker images $ docker images -a\n")])])]),t("p",[a._v("过滤满足条件的镜像")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker images -a "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"pattern"')]),a._v("\n")])])]),t("h3",{attrs:{id:"删除镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除镜像"}},[a._v("#")]),a._v(" 删除镜像")]),a._v(" "),t("h4",{attrs:{id:"根据镜像名称删除镜像-可以有多个镜像名称-多个镜像名称用空格分开"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#根据镜像名称删除镜像-可以有多个镜像名称-多个镜像名称用空格分开"}},[a._v("#")]),a._v(" 根据镜像名称删除镜像，可以有多个镜像名称，多个镜像名称用空格分开")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker rmi "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("imageName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("imageName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),t("h4",{attrs:{id:"根据镜像名称的格式批量删除镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#根据镜像名称的格式批量删除镜像"}},[a._v("#")]),a._v(" 根据镜像名称的格式批量删除镜像")]),a._v(" "),t("h5",{attrs:{id:"列出满足条件的镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出满足条件的镜像"}},[a._v("#")]),a._v(" 列出满足条件的镜像")]),a._v(" "),t("div",{staticClass:"language-sheel extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('docker images -a |  grep "pattern"\n')])])]),t("h5",{attrs:{id:"移除镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#移除镜像"}},[a._v("#")]),a._v(" 移除镜像")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker images -a "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"pattern"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$3")]),a._v("}'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("xargs")]),a._v(" docker rmi\n")])])]),t("blockquote",[t("p",[a._v('删除"<none>" 镜像 :')]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker images -a "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"<none>"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$3")]),a._v("}'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("xargs")]),a._v(" docker rmi\n")])])])]),a._v(" "),t("p",[t("a",{attrs:{href:"https://linuxize.com/post/awk-command/",target:"_blank",rel:"noopener noreferrer"}},[a._v("awk?"),t("OutboundLink")],1)]),a._v(" "),t("ul",[t("li",[a._v("awk '{print $3}' 输出镜像ID，")])]),a._v(" "),t("p",[t("a",{attrs:{href:"https://shapeshed.com/unix-xargs/",target:"_blank",rel:"noopener noreferrer"}},[a._v("xargs?"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("从标准输入构建一个可执行的管道")]),a._v(" "),t("blockquote",[t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("echo 'one two three' | xargs mkdir\nls\none two three\n")])])])]),a._v(" "),t("ul",[t("li",[a._v("xargs docker rmi 对于得到的镜像ID，执行docker rmi 命令")])]),a._v(" "),t("h4",{attrs:{id:"移除所有镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#移除所有镜像"}},[a._v("#")]),a._v(" 移除所有镜像")]),a._v(" "),t("h5",{attrs:{id:"列出所有镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出所有镜像"}},[a._v("#")]),a._v(" 列出所有镜像")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker images -a\n")])])]),t("h5",{attrs:{id:"移除镜像-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#移除镜像-2"}},[a._v("#")]),a._v(" 移除镜像")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker rmi "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("docker images -a -q"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n")])])]),t("p",[t("code",[a._v("-q")]),a._v(": 传递镜像ID 给 "),t("code",[a._v("docker rmi")])]),a._v(" "),t("h3",{attrs:{id:"从容器创建新的镜像-commit容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从容器创建新的镜像-commit容器"}},[a._v("#")]),a._v(" 从容器创建新的镜像（commit容器）")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker commit -m"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'smart-clip version 0.0.1'")]),a._v(" -a"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'zhou'")]),a._v(" -p 68b0b30addd9 smart-clip:0.0.1\n")])])]),t("ul",[t("li",[a._v("-m: 说明")]),a._v(" "),t("li",[a._v("-a: author")]),a._v(" "),t("li",[a._v("-p: 容器ID")])]),a._v(" "),t("h3",{attrs:{id:"将镜像推送到私有仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#将镜像推送到私有仓库"}},[a._v("#")]),a._v(" 将镜像推送到私有仓库")]),a._v(" "),t("ol",[t("li",[a._v("给镜像打tag")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker tag "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" IMAGE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":TAG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("REGISTRYHOST/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("USERNAME/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("NAME"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":TAG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ul",[t("li",[a._v("REGISTRYHOST 为私有仓库地址。")])]),a._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[a._v("推送到私有仓库")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker push NAME"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":TAG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("Example:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker tag 518a41981a6a myRegistry.com/myImagedocker push myRegistry.com/myImage\n")])])])]),a._v(" "),t("h3",{attrs:{id:"将镜像打包为压缩文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#将镜像打包为压缩文件"}},[a._v("#")]),a._v(" 将镜像打包为压缩文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker save "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" IMAGE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("IMAGE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ul",[t("li",[a._v("-o 可以指定生成的打包文件名")]),a._v(" "),t("li",[a._v("可以一次打包多个镜像")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# example$ docker save -o openjkd8.tar openjdk")]),a._v("\n")])])]),t("h3",{attrs:{id:"无法删除镜像问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#无法删除镜像问题"}},[a._v("#")]),a._v(" 无法删除镜像问题")]),a._v(" "),t("h4",{attrs:{id:"image-has-dependent-child-images"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#image-has-dependent-child-images"}},[a._v("#")]),a._v(" image has dependent child images")]),a._v(" "),t("h4",{attrs:{id:"image-is-referenced-in-multiple-repositories"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#image-is-referenced-in-multiple-repositories"}},[a._v("#")]),a._v(" image is referenced in multiple repositories")]),a._v(" "),t("p",[a._v("https://stackoverflow.com/questions/53354523/can-not-remove-images-even-though-no-container-is-running")]),a._v(" "),t("p",[a._v("You cannot remove images having multiple repositories without the force modifier, see Docker "),t("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/rmi/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docs"),t("OutboundLink")],1),a._v(" for more info.")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker imagesREPOSITORY                   TAG      IMAGE ID            CREATED           SIZErepository/image-name        tag      a8e6fa672e89        "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" days ago         344MBrepository2/image-name       tag      a8e6fa672e89        "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" days ago         344MB\n")])])]),t("p",[a._v("If you want to do it manually, instead of using the image id to remove the images, you must remove the repository/tag that you don't need using image names:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker rmi a8e6fa672e89Error response from daemon: conflict: unable to delete a8e6fa672e89 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("must be forced"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" - image is referenced "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" multiple repositories\n")])])]),t("p",[a._v("Remove the repository/tag you don't need:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker rmi repository/image-name:tagUntagged: repository/image-name:tagUntagged: repository/image-name:tag@sha256:64b5a02e2bb3ee4d4b7c0982e8e2e5eb68bdfd0fb096fce22b6c030dafb53a33\n")])])]),t("p",[a._v("(Repeat last step until only one repository/tag remains) And now you will be able to remove the image:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ docker rmi a8e6fa672e89Untagged: repository2/image-name:tagDeleted: sha256:a8e6fa672e89b399bd3ac52b96c031e6816a69191d1fd7e6a1839fd643e3c751Deleted: sha256:9861dd7b5783217515f571fdcfa6729e1e38af3ae9c971026e5a317b12fc5905\n")])])]),t("p",[a._v("If you use the -f flag and specify the image’s short or long ID, then rmi untags and removes all images that match the specified ID.")]),a._v(" "),t("p",[a._v("有多个id相同的镜像时，删除时要使用仓库名和tag删除，不要使用id.")])])}),[],!1,null,null,null);s.default=r.exports}}]);